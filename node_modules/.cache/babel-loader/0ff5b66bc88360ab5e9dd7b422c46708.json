{"ast":null,"code":"var _jsxFileName = \"/home/salman/.local/share/dot_files/Storage/Workspace/soulfly/client/src/App.js\";\nimport Input from './Input';\nimport Messages from './Messages';\nimport React, { useState, useEffect, useRef } from 'react';\nimport socketIOClient from 'socket.io-client';\n\nconst App = () => {\n  const [messages, setMessages] = useState([]);\n  const [seen, setSeen] = useState(true);\n  const socketRef = useRef();\n  useEffect(() => {\n    const uName = prompt('Tell us your name');\n    socketRef.current = socketIOClient('http://localhost:5000');\n    socketRef.current.on('message', msg => {\n      setMessages(messages => [...messages, msg]);\n      setSeen(false);\n    });\n    socketRef.current.on('seen', data => {\n      setMessages(messages => [...messages, 'message seen']);\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, []);\n\n  const typing = data => {\n    socketRef.current.emit('typing');\n  };\n\n  const send = msg => {\n    socketRef.current.emit('message', msg);\n  };\n\n  const saw = () => {\n    !seen && socketRef.current.emit('seen') && setSeen(true); // socketRef.current.emit('seen')\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Messages, {\n    messages: messages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    onSendMessage: msg => send(msg),\n    onInput: typing,\n    onFocus: saw,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 10\n    }\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/salman/.local/share/dot_files/Storage/Workspace/soulfly/client/src/App.js"],"names":["Input","Messages","React","useState","useEffect","useRef","socketIOClient","App","messages","setMessages","seen","setSeen","socketRef","uName","prompt","current","on","msg","data","disconnect","typing","emit","send","saw"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,MAApC,QAAkD,OAAlD;AACA,OAAOC,cAAP,MAA2B,kBAA3B;;AAEA,MAAMC,GAAG,GAAG,MAAM;AAEf,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BN,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAMS,SAAS,GAAGP,MAAM,EAAxB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACb,UAAMS,KAAK,GAAGC,MAAM,CAAC,mBAAD,CAApB;AACAF,IAAAA,SAAS,CAACG,OAAV,GAAoBT,cAAc,CAAC,uBAAD,CAAlC;AAEAM,IAAAA,SAAS,CAACG,OAAV,CAAkBC,EAAlB,CAAqB,SAArB,EAAgCC,GAAG,IAAI;AACpCR,MAAAA,WAAW,CAACD,QAAQ,IAAI,CAAC,GAAGA,QAAJ,EAAcS,GAAd,CAAb,CAAX;AACAN,MAAAA,OAAO,CAAC,KAAD,CAAP;AACF,KAHD;AAKAC,IAAAA,SAAS,CAACG,OAAV,CAAkBC,EAAlB,CAAqB,MAArB,EAA6BE,IAAI,IAAI;AAClCT,MAAAA,WAAW,CAACD,QAAQ,IAAI,CAAC,GAAGA,QAAJ,EAAc,cAAd,CAAb,CAAX;AACF,KAFD;AAIA,WAAO,MAAM;AACVI,MAAAA,SAAS,CAACG,OAAV,CAAkBI,UAAlB;AACF,KAFD;AAGF,GAhBQ,EAgBN,EAhBM,CAAT;;AAkBA,QAAMC,MAAM,GAAGF,IAAI,IAAI;AACpBN,IAAAA,SAAS,CAACG,OAAV,CAAkBM,IAAlB,CAAuB,QAAvB;AACF,GAFD;;AAIA,QAAMC,IAAI,GAAGL,GAAG,IAAI;AACjBL,IAAAA,SAAS,CAACG,OAAV,CAAkBM,IAAlB,CAAuB,SAAvB,EAAkCJ,GAAlC;AACF,GAFD;;AAIA,QAAMM,GAAG,GAAG,MAAM;AACf,KAACb,IAAD,IAASE,SAAS,CAACG,OAAV,CAAkBM,IAAlB,CAAuB,MAAvB,CAAT,IAA2CV,OAAO,CAAC,IAAD,CAAlD,CADe,CAEf;AACF,GAHD;;AAKA,sBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACG,oBAAC,QAAD;AAAU,IAAA,QAAQ,EAAEH,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,eAEG,oBAAC,KAAD;AAAO,IAAA,aAAa,EAAES,GAAG,IAAIK,IAAI,CAACL,GAAD,CAAjC;AAAwC,IAAA,OAAO,EAAEG,MAAjD;AAAyD,IAAA,OAAO,EAAEG,GAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFH,CADH;AAOF,CA7CD;;AA+CA,eAAehB,GAAf","sourcesContent":["import Input from './Input';\nimport Messages from './Messages';\nimport React,{ useState, useEffect, useRef } from 'react';\nimport socketIOClient from 'socket.io-client';\n\nconst App = () => {\n\n   const [messages, setMessages] = useState([]);\n   const [seen, setSeen] = useState(true);\n\n   const socketRef = useRef();\n\n   useEffect(() => {\n      const uName = prompt('Tell us your name')\n      socketRef.current = socketIOClient('http://localhost:5000');\n\n      socketRef.current.on('message', msg => {\n         setMessages(messages => [...messages, msg ])\n         setSeen(false)\n      })\n\n      socketRef.current.on('seen', data => {\n         setMessages(messages => [...messages, 'message seen' ])\n      })\n\n      return () => {\n         socketRef.current.disconnect();\n      };\n   }, []);\n\n   const typing = data => {\n      socketRef.current.emit('typing');\n   };\n\n   const send = msg => {\n      socketRef.current.emit('message', msg);\n   };\n\n   const saw = () => {\n      !seen && socketRef.current.emit('seen') && setSeen(true)\n      // socketRef.current.emit('seen')\n   };\n\n   return (\n      <div>\n         <Messages messages={messages} />\n         <Input onSendMessage={msg => send(msg)} onInput={typing} onFocus={saw}/>\n      </div>\n   );\n\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}