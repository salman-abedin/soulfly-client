{"ast":null,"code":"import socketIOClient from 'socket.io-client';\nimport { useState, useEffect, useRef } from 'react';\n\nconst useChat = () => {\n  const [messages, setMessages] = useState([]);\n  const socketRef = useRef();\n  useEffect(() => {\n    socketRef.current.usr = prompt('Tell us your name');\n    socketRef.current = socketIOClient('http://localhost:5000');\n    socketRef.current.on('typing', usr => {\n      console.log(`${usr} is typing`);\n    });\n    socketRef.current.on('message', msg => {\n      setMessages(messages => [...messages, msg]);\n    });\n    socketRef.current.on('seen', usr => {\n      console.log(`seen by ${usr}`);\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, []);\n\n  const typing = () => {\n    socketRef.current.emit('typing', socketRef.current.usr);\n  };\n\n  const send = msg => {\n    socketRef.current.emit('message', msg);\n  };\n\n  const seen = () => {\n    socketRef.current.emit('seen');\n  };\n\n  return {\n    messages,\n    send,\n    typing,\n    seen\n  };\n};\n\nexport default useChat;","map":{"version":3,"sources":["/home/salman/.local/share/dot_files/Storage/Workspace/soulfly/client/src/useChat.js"],"names":["socketIOClient","useState","useEffect","useRef","useChat","messages","setMessages","socketRef","current","usr","prompt","on","console","log","msg","disconnect","typing","emit","send","seen"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,kBAA3B;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;;AAEA,MAAMC,OAAO,GAAG,MAAM;AACnB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAMM,SAAS,GAAGJ,MAAM,EAAxB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACbK,IAAAA,SAAS,CAACC,OAAV,CAAkBC,GAAlB,GAAwBC,MAAM,CAAC,mBAAD,CAA9B;AACAH,IAAAA,SAAS,CAACC,OAAV,GAAoBR,cAAc,CAAC,uBAAD,CAAlC;AAEAO,IAAAA,SAAS,CAACC,OAAV,CAAkBG,EAAlB,CAAqB,QAArB,EAA+BF,GAAG,IAAI;AACnCG,MAAAA,OAAO,CAACC,GAAR,CAAa,GAAEJ,GAAI,YAAnB;AACF,KAFD;AAIAF,IAAAA,SAAS,CAACC,OAAV,CAAkBG,EAAlB,CAAqB,SAArB,EAAgCG,GAAG,IAAI;AACpCR,MAAAA,WAAW,CAACD,QAAQ,IAAI,CAAC,GAAGA,QAAJ,EAAcS,GAAd,CAAb,CAAX;AACF,KAFD;AAIAP,IAAAA,SAAS,CAACC,OAAV,CAAkBG,EAAlB,CAAqB,MAArB,EAA6BF,GAAG,IAAI;AACjCG,MAAAA,OAAO,CAACC,GAAR,CAAa,WAAUJ,GAAI,EAA3B;AACF,KAFD;AAIA,WAAO,MAAM;AACVF,MAAAA,SAAS,CAACC,OAAV,CAAkBO,UAAlB;AACF,KAFD;AAGF,GAnBQ,EAmBN,EAnBM,CAAT;;AAqBA,QAAMC,MAAM,GAAG,MAAM;AAClBT,IAAAA,SAAS,CAACC,OAAV,CAAkBS,IAAlB,CAAuB,QAAvB,EAAiCV,SAAS,CAACC,OAAV,CAAkBC,GAAnD;AACF,GAFD;;AAIA,QAAMS,IAAI,GAAGJ,GAAG,IAAI;AACjBP,IAAAA,SAAS,CAACC,OAAV,CAAkBS,IAAlB,CAAuB,SAAvB,EAAkCH,GAAlC;AACF,GAFD;;AAIA,QAAMK,IAAI,GAAG,MAAM;AAChBZ,IAAAA,SAAS,CAACC,OAAV,CAAkBS,IAAlB,CAAuB,MAAvB;AACF,GAFD;;AAIA,SAAO;AAAEZ,IAAAA,QAAF;AAAYa,IAAAA,IAAZ;AAAkBF,IAAAA,MAAlB;AAA0BG,IAAAA;AAA1B,GAAP;AAEF,CAxCD;;AA0CA,eAAef,OAAf","sourcesContent":["import socketIOClient from 'socket.io-client';\nimport { useState, useEffect, useRef } from 'react';\n\nconst useChat = () => {\n   const [messages, setMessages] = useState([]);\n\n   const socketRef = useRef();\n\n   useEffect(() => {\n      socketRef.current.usr = prompt('Tell us your name')\n      socketRef.current = socketIOClient('http://localhost:5000');\n\n      socketRef.current.on('typing', usr => {\n         console.log(`${usr} is typing`)\n      })\n\n      socketRef.current.on('message', msg => {\n         setMessages(messages => [...messages, msg ])\n      })\n\n      socketRef.current.on('seen', usr => {\n         console.log(`seen by ${usr}`)\n      })\n\n      return () => {\n         socketRef.current.disconnect();\n      };\n   }, []);\n\n   const typing = () => {\n      socketRef.current.emit('typing', socketRef.current.usr);\n   };\n\n   const send = msg => {\n      socketRef.current.emit('message', msg);\n   };\n\n   const seen = () => {\n      socketRef.current.emit('seen');\n   };\n\n   return { messages, send, typing, seen };\n\n};\n\nexport default useChat;\n"]},"metadata":{},"sourceType":"module"}