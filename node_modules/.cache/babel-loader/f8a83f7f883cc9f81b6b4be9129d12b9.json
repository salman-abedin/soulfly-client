{"ast":null,"code":"import socketIOClient from 'socket.io-client';\nimport { useState, useEffect, useRef } from 'react';\n\nconst useChat = () => {\n  const [messages, setMessages] = useState([]);\n  const socketRef = useRef();\n\n  const typing = () => {\n    socketRef.current.emit('typing');\n  };\n\n  const send = msg => {\n    socketRef.current.emit('message', msg);\n  };\n\n  const seenMessage = () => {\n    socketRef.current.emit('seen');\n  };\n\n  useEffect(() => {\n    socketRef.current = socketIOClient('http://localhost:5000'); // setTimeout(() =>{\n    //    socketRef.current.disconnect()\n    // }, 2000)\n\n    socketRef.current.on('message', msg => {\n      setMessages(messages => [...messages, msg]);\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, []);\n  return {\n    messages,\n    send,\n    typing,\n    seen\n  };\n};\n\nexport default useChat;","map":{"version":3,"sources":["/home/salman/.local/share/dot_files/Storage/Workspace/soulfly/client.old/src/useChat.js"],"names":["socketIOClient","useState","useEffect","useRef","useChat","messages","setMessages","socketRef","typing","current","emit","send","msg","seenMessage","on","disconnect","seen"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,kBAA3B;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;;AAEA,MAAMC,OAAO,GAAG,MAAM;AACnB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAMM,SAAS,GAAGJ,MAAM,EAAxB;;AAEA,QAAMK,MAAM,GAAG,MAAM;AAClBD,IAAAA,SAAS,CAACE,OAAV,CAAkBC,IAAlB,CAAuB,QAAvB;AACF,GAFD;;AAIA,QAAMC,IAAI,GAAIC,GAAD,IAAS;AACnBL,IAAAA,SAAS,CAACE,OAAV,CAAkBC,IAAlB,CAAuB,SAAvB,EAAkCE,GAAlC;AACF,GAFD;;AAIA,QAAMC,WAAW,GAAG,MAAM;AACvBN,IAAAA,SAAS,CAACE,OAAV,CAAkBC,IAAlB,CAAuB,MAAvB;AACF,GAFD;;AAIAR,EAAAA,SAAS,CAAC,MAAM;AACbK,IAAAA,SAAS,CAACE,OAAV,GAAoBT,cAAc,CAAC,uBAAD,CAAlC,CADa,CAGb;AACA;AACA;;AAEAO,IAAAA,SAAS,CAACE,OAAV,CAAkBK,EAAlB,CAAqB,SAArB,EAAgCF,GAAG,IAAI;AACpCN,MAAAA,WAAW,CAACD,QAAQ,IAAI,CAAC,GAAGA,QAAJ,EAAcO,GAAd,CAAb,CAAX;AACF,KAFD;AAIA,WAAO,MAAM;AACVL,MAAAA,SAAS,CAACE,OAAV,CAAkBM,UAAlB;AACF,KAFD;AAGF,GAdQ,EAcN,EAdM,CAAT;AAgBA,SAAO;AAAEV,IAAAA,QAAF;AAAYM,IAAAA,IAAZ;AAAkBH,IAAAA,MAAlB;AAA0BQ,IAAAA;AAA1B,GAAP;AACF,CAlCD;;AAoCA,eAAeZ,OAAf","sourcesContent":["import socketIOClient from 'socket.io-client';\nimport { useState, useEffect, useRef } from 'react';\n\nconst useChat = () => {\n   const [messages, setMessages] = useState([]);\n\n   const socketRef = useRef();\n\n   const typing = () => {\n      socketRef.current.emit('typing');\n   };\n\n   const send = (msg) => {\n      socketRef.current.emit('message', msg);\n   };\n\n   const seenMessage = () => {\n      socketRef.current.emit('seen');\n   };\n\n   useEffect(() => {\n      socketRef.current = socketIOClient('http://localhost:5000');\n\n      // setTimeout(() =>{\n      //    socketRef.current.disconnect()\n      // }, 2000)\n\n      socketRef.current.on('message', msg => {\n         setMessages(messages => [...messages, msg ])\n      })\n\n      return () => {\n         socketRef.current.disconnect();\n      };\n   }, []);\n\n   return { messages, send, typing, seen };\n};\n\nexport default useChat;\n"]},"metadata":{},"sourceType":"module"}